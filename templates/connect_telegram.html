<!DOCTYPE html>
<html lang="en" data-theme="{{ theme }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connect Telegram - SMM Automation</title>
    <meta name="description" content="Connect your Telegram account to receive real-time notifications about your orders and automation jobs.">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="{{ url_for('static', filename='img/favicon.png') }}" type="image/png">
    <style>
        :root {
            --primary-color: #4361ee;
            --primary-dark: #3a56d4;
            --secondary-color: #7209b7;
            --accent-color: #f72585;
            --light-gray: #f8f9fa;
            --mid-gray: #e9ecef;
            --dark-gray: #6c757d;
            --text-color: #212529;
            --white: #ffffff;
            --black: #121212;
            --space-bg: #050825;
            --space-alt: #03041a;
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.25);
            --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            --success: #38b000;
            --warning: #ffaa00;
            --danger: #e5383b;
            --info: #3a86ff;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
            --border-radius: 12px;
            --border-radius-sm: 8px;
            --border-radius-lg: 20px;
            --max-width: 1200px;
            --header-height: 70px;
            --footer-height: 300px;
        }

        /* Dark theme colors */
        [data-theme="dark"] {
            --primary-color: #4cc9f0;
            --primary-dark: #3a86ff;
            --secondary-color: #8338ec;
            --accent-color: #ff006e;
            --light-gray: #2d3748;
            --mid-gray: #4a5568;
            --dark-gray: #a0aec0;
            --text-color: #f7fafc;
            --white: #1a202c;
            --black: #f7fafc;
            --space-bg: #03041a;
            --space-alt: #050825;
            --glass-bg: rgba(26, 32, 44, 0.2);
            --glass-border: rgba(255, 255, 255, 0.1);
            --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            color: var(--white);
            line-height: 1.6;
            overflow-x: hidden;
            background-color: var(--space-bg);
            transition: var(--transition);
            height: 100%;
            perspective: 1000px;
            min-height: 100vh;
        }

        a {
            text-decoration: none;
            color: var(--primary-color);
            transition: var(--transition);
        }

        a:hover {
            color: var(--primary-dark);
        }

        ul {
            list-style: none;
        }

        /* Fixed Background */
        html {
            height: 100%;
            overflow-x: hidden;
        }

        body {
            min-height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            position: relative;
        }

        /* Optimized Space Background */
        .space-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--space-bg);
            z-index: -10;
            overflow: hidden;
        }

        .space-background::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(1px 1px at 25% 15%, rgba(255, 255, 255, 0.8), transparent),
                radial-gradient(1px 1px at 50% 50%, rgba(255, 255, 255, 0.6), transparent),
                radial-gradient(2px 2px at 75% 30%, rgba(255, 255, 255, 0.9), transparent),
                radial-gradient(1px 1px at 10% 60%, rgba(255, 255, 255, 0.7), transparent),
                radial-gradient(1.5px 1.5px at 85% 70%, rgba(255, 255, 255, 0.8), transparent),
                radial-gradient(1px 1px at 30% 80%, rgba(255, 255, 255, 0.7), transparent);
            background-size: 550px 550px, 350px 350px, 400px 400px, 300px 300px, 450px 450px, 350px 350px;
            opacity: 0.6;
        }
                
        /* Optimized nebulas */
        .nebula {
            position: absolute;
            border-radius: 50%;
            filter: blur(50px);
            opacity: 0.15;
            background: radial-gradient(circle at center, var(--color-center), transparent 70%);
            z-index: -9;
            will-change: transform;
        }

        /* Navbar Styling */
        .navbar {
            background: rgba(5, 8, 37, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--glass-border);
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            transition: var(--transition);
            height: var(--header-height);
            display: flex;
            align-items: center;
            padding: 0 20px;
        }

        .navbar-container {
            max-width: var(--max-width);
            margin: 0 auto;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .navbar-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            font-size: 1.5rem;
            color: var(--white);
        }

        .navbar-logo img {
            height: 40px;
        }

        .nav-links {
            display: flex;
            gap: 30px;
        }

        .nav-link {
            color: var(--white);
            font-weight: 500;
            position: relative;
            transition: var(--transition);
            opacity: 0.8;
        }

        .nav-link:hover {
            opacity: 1;
            color: var(--primary-color);
        }

        .nav-link.active {
            opacity: 1;
            color: var(--primary-color);
        }

        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            border-radius: 5px;
        }

        .navbar-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .user-dropdown {
            position: relative;
        }

        .user-dropdown-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            padding: 5px 10px;
            border-radius: var(--border-radius);
            background: rgba(255, 255, 255, 0.05);
            transition: var(--transition);
        }

        .user-dropdown-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .user-dropdown-content {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 10px;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius);
            padding: 10px 0;
            width: 200px;
            box-shadow: var(--box-shadow);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: var(--transition);
            z-index: 10;
        }

        .user-dropdown.active .user-dropdown-content {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-item {
            padding: 10px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--white);
            transition: var(--transition);
        }

        .dropdown-item:hover {
            background: rgba(255, 255, 255, 0.05);
            color: var(--primary-color);
        }

        .dropdown-divider {
            height: 1px;
            background: var(--glass-border);
            margin: 8px 0;
        }

        .mobile-menu-toggle {
            display: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--white);
        }

        /* Theme Switch */
        .theme-switch-wrapper {
            position: fixed;
            top: 85px;
            right: 20px;
            z-index: 1000;
            display: flex;
            align-items: center;
        }

        .theme-switch {
            display: inline-block;
            height: 34px;
            position: relative;
            width: 60px;
        }

        .theme-switch input {
            display: none;
        }

        .slider {
            background: linear-gradient(45deg, #4361ee, #7209b7);
            bottom: 0;
            cursor: pointer;
            left: 0;
            position: absolute;
            right: 0;
            top: 0;
            transition: var(--transition);
            border-radius: 34px;
        }

        .slider:before {
            background-color: var(--white);
            bottom: 4px;
            content: "";
            height: 26px;
            left: 4px;
            position: absolute;
            transition: var(--transition);
            width: 26px;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        input:checked + .slider {
            background: linear-gradient(45deg, #8338ec, #3a86ff);
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        /* Glass Effect Styling */
        .glass {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            box-shadow: var(--glass-shadow);
        }

        /* Container */
        .container {
            max-width: var(--max-width);
            margin: 0 auto;
            padding: 0 20px;
            margin-top: calc(var(--header-height) + 40px);
            padding-bottom: 60px;
            position: relative;
            z-index: 1;
        }

        /* Flash Messages */
        .flash-messages {
            margin-bottom: 30px;
        }

        .flash-message {
            background: rgba(67, 97, 238, 0.1);
            border-left: 4px solid var(--primary-color);
            padding: 15px 20px;
            margin-bottom: 15px;
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: space-between;
            animation: flashAnimation 0.5s ease;
            color: var(--white);
        }

        @keyframes flashAnimation {
            0% {
                transform: translateX(-20px);
                opacity: 0;
            }
            100% {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .flash-close {
            background: none;
            border: none;
            color: var(--white);
            cursor: pointer;
            font-size: 1.2rem;
            opacity: 0.7;
            transition: var(--transition);
        }

        .flash-close:hover {
            opacity: 1;
        }

        /* Page Header */
        .page-header {
            margin-bottom: 30px;
        }

        .page-header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color), var(--accent-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            background-size: 200%;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .page-description {
            font-size: 1.1rem;
            color: var(--white);
            opacity: 0.8;
        }

        /* Alert */
        .alert {
            display: flex;
            gap: 20px;
            padding: 25px;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            transition: var(--transition);
        }

        .alert:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .info-alert {
            border-left: 4px solid var(--info);
        }

        .alert-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: var(--info);
            min-width: 60px;
        }

        .alert-content h3 {
            font-size: 1.3rem;
            margin-bottom: 10px;
        }

        .alert-content p {
            opacity: 0.9;
        }

        /* Section Styling */
        .section {
            margin-bottom: 40px;
            padding: 30px;
            border-radius: var(--border-radius);
            position: relative;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            background: var(--glass-bg);
            opacity: 0;
            animation: fadeIn 0.6s forwards;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section:nth-child(3) {
            animation-delay: 0.3s;
        }

        .section:nth-child(4) {
            animation-delay: 0.6s;
        }

        .section:hover {
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .section-header {
            margin-bottom: 25px;
        }

        .section-header h2 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--white);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-header h2 i {
            color: var(--primary-color);
        }

        /* Telegram Connection Status */
        .telegram-status-section {
            background: rgba(58, 134, 255, 0.05);
        }

        .telegram-connection-status {
            display: flex;
            align-items: center;
            gap: 25px;
            padding: 15px;
            background: rgba(58, 134, 255, 0.05);
            border-radius: var(--border-radius);
            border-left: 4px solid var(--info);
        }

        .connection-icon {
            font-size: 2.5rem;
            color: var(--info);
            min-width: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .connection-details {
            flex: 1;
        }

        .connection-details h3 {
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .connection-details p {
            margin-bottom: 5px;
        }

        .connection-note {
            opacity: 0.7;
            font-size: 0.9rem;
        }

        code {
            background: rgba(255, 255, 255, 0.1);
            padding: 2px 5px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 0.9rem;
        }

        /* Telegram Setup Steps */
        .telegram-setup {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .telegram-step {
            display: flex;
            gap: 20px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: var(--border-radius);
            padding: 20px;
            border: 1px solid var(--glass-border);
            transform: translateY(20px);
            opacity: 0;
            transition: var(--transition);
        }

        .telegram-step.animate-in {
            transform: translateY(0);
            opacity: 1;
        }

        .telegram-step:hover {
            background: rgba(255, 255, 255, 0.05);
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }

        .step-number {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: var(--white);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
        }

        .step-content h3 {
            margin-bottom: 10px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .step-content h3 i {
            color: var(--primary-color);
        }

        .step-content p {
            margin-bottom: 15px;
        }

        .step-action {
            margin-top: 20px;
        }

        /* Telegram Preview Images */
        .telegram-image {
            margin: 15px 0;
            text-align: center;
        }

        .telegram-preview {
            max-width: 100%;
            height: auto;
            border-radius: var(--border-radius);
            border: 1px solid var(--glass-border);
            box-shadow: var(--box-shadow);
        }

        /* Telegram Chat Preview */
        .telegram-chat-preview {
            background: rgba(58, 134, 255, 0.05);
            border-radius: var(--border-radius);
            border: 1px solid var(--glass-border);
            overflow: hidden;
            margin: 20px 0;
        }

        .telegram-chat-header {
            background: rgba(58, 134, 255, 0.1);
            padding: 12px 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .telegram-chat-avatar {
            width: 30px;
            height: 30px;
            background: var(--info);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 0.8rem;
        }

        .telegram-chat-name {
            font-weight: 600;
        }

        .telegram-message-box {
            padding: 12px 15px;
            margin: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px 10px 10px 0;
            position: relative;
        }

        .telegram-message-box.bot {
            background: rgba(58, 134, 255, 0.1);
            border-radius: 10px 10px 0 10px;
            margin-left: auto;
        }

        .telegram-user {
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 5px;
            opacity: 0.8;
        }

        .telegram-text {
            margin-bottom: 5px;
        }

        .telegram-text:last-child {
            margin-bottom: 0;
        }

        .highlight {
            color: var(--primary-color);
            font-weight: 600;
        }

        /* Form Styling */
        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--white);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        label i {
            color: var(--primary-color);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius-sm);
            color: var(--white);
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
            background: rgba(255, 255, 255, 0.1);
        }

        .form-text {
            margin-top: 8px;
            font-size: 0.9rem;
            color: var(--white);
            opacity: 0.7;
        }

        .input-with-button {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            padding: 0;
        }

        .is-invalid {
            border-color: var(--danger) !important;
            box-shadow: 0 0 0 3px rgba(229, 56, 59, 0.2) !important;
        }

        /* Button Styles */
        .form-buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            flex-wrap: wrap;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px 20px;
            border-radius: var(--border-radius);
            font-weight: 500;
            font-size: 1rem;
            transition: var(--transition);
            border: none;
            cursor: pointer;
            gap: 8px;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 100%;
            transition: width 0.4s ease;
            z-index: -1;
            opacity: 0.3;
        }

        .btn:hover::before {
            width: 100%;
        }

        .btn-primary {
            background: linear-gradient(45deg, var(--primary-color), var(--primary-dark));
            color: var(--white);
            box-shadow: 0 0 15px rgba(67, 97, 238, 0.6);
        }

        .btn-primary::before {
            background: var(--white);
        }

        .btn-secondary {
            background: linear-gradient(45deg, var(--secondary-color), var(--accent-color));
            color: var(--white);
            box-shadow: 0 0 15px rgba(114, 9, 183, 0.6);
        }

        .btn-secondary::before {
            background: var(--white);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none !important;
        }

        /* FAQ Section */
        .faq-section {
            margin-top: 40px;
        }

        .faq-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .faq-item {
            background: rgba(255, 255, 255, 0.03);
            border-radius: var(--border-radius);
            overflow: hidden;
            border: 1px solid var(--glass-border);
            transition: var(--transition);
        }

        .faq-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .faq-question {
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .faq-question:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .faq-question h3 {
            font-size: 1.1rem;
            font-weight: 500;
            margin: 0;
        }

        .faq-question i {
            font-size: 0.9rem;
            opacity: 0.7;
            transition: var(--transition);
        }

        .faq-answer {
            padding: 0 20px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .faq-answer p {
            margin-bottom: 15px;
        }

        .faq-answer p:last-child {
            margin-bottom: 20px;
        }

        .faq-answer ul {
            margin-left: 20px;
            margin-bottom: 20px;
        }

        .faq-answer ul li {
            margin-bottom: 8px;
            position: relative;
            padding-left: 15px;
        }

        .faq-answer ul li::before {
            content: '';
            position: absolute;
            left: 0;
            top: 10px;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--primary-color);
        }

        /* Animate In */
        .animate-in {
            opacity: 1;
            transform: translateY(0);
        }

        /* Responsive Styles */
        @media (max-width: 992px) {
            .navbar-container {
                position: relative;
            }

            .nav-links {
                position: fixed;
                top: var(--header-height);
                left: -100%;
                width: 250px;
                height: calc(100vh - var(--header-height));
                background: var(--glass-bg);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                flex-direction: column;
                padding: 30px 20px;
                gap: 15px;
                transition: left 0.3s ease;
                border-right: 1px solid var(--glass-border);
                z-index: 5;
            }

            .nav-links.active {
                left: 0;
            }

            .mobile-menu-toggle {
                display: block;
            }

            .telegram-connection-status {
                flex-direction: column;
                align-items: flex-start;
            }

            .alert {
                flex-direction: column;
            }
        }

        @media (max-width: 768px) {
            .page-header h1 {
                font-size: 2rem;
            }

            .theme-switch-wrapper {
                top: 20px;
                right: 80px;
            }

            .form-buttons {
                flex-direction: column;
            }

            .telegram-step {
                flex-direction: column;
            }

            .step-number {
                margin-bottom: 10px;
            }
        }

        @media (max-width: 576px) {
            .container {
                padding: 0 15px;
            }

            .section {
                padding: 20px;
            }

            .input-with-button {
                flex-direction: column;
                align-items: flex-start;
            }

            .btn-icon {
                width: auto;
                height: auto;
                padding: 8px 15px;
            }
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--space-bg);
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(var(--primary-color), var(--secondary-color));
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(var(--secondary-color), var(--primary-color));
        }
    </style>
</head>
<body>
    <!-- Space Background -->
    <div class="space-background">
        <!-- Static Nebulae -->
        <div class="nebula" style="top: 10%; left: 15%; width: 400px; height: 400px; --color-center: rgba(114, 9, 183, 0.5);"></div>
        <div class="nebula" style="bottom: 20%; right: 10%; width: 500px; height: 500px; --color-center: rgba(76, 201, 240, 0.5);"></div>
    </div>
    
    {% include 'navbar.html' %}
    
    <div class="theme-switch-wrapper">
        <label class="theme-switch" title="Toggle dark/light mode">
            <input type="checkbox" id="theme-toggle" {% if theme == 'dark' %}checked{% endif %}>
            <span class="slider"></span>
        </label>
    </div>
    
    <div class="container">
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                <div class="flash-messages">
                    {% for message in messages %}
                        <div class="flash-message glass">
                            <i class="fas fa-info-circle"></i> {{ message }}
                            <button class="flash-close">&times;</button>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}
        
        <div class="page-header">
            <h1><i class="fab fa-telegram-plane"></i> Connect Telegram</h1>
            <p class="page-description">Receive real-time notifications about your orders and automation jobs</p>
        </div>
        
        <div class="alert info-alert glass">
            <div class="alert-icon"><i class="fas fa-bell"></i></div>
            <div class="alert-content">
                <h3>Why Connect Telegram?</h3>
                <p>Get instant notifications when orders are placed or completed, when jobs are running, and for important account updates.</p>
            </div>
        </div>
        
        {% if current_telegram_id %}
        <div class="section telegram-status-section glass">
            <div class="section-header">
                <h2><i class="fas fa-check-circle"></i> Current Connection</h2>
            </div>
            
            <div class="telegram-connection-status">
                <div class="connection-icon">
                    <i class="fab fa-telegram-plane"></i>
                </div>
                <div class="connection-details">
                    <h3>Telegram Connected</h3>
                    <p>Your account is currently connected to Telegram chat ID: <code>{{ current_telegram_id }}</code></p>
                    <p class="connection-note">You can update your Telegram ID below if needed.</p>
                </div>
                <div class="connection-actions">
                    <button id="sendTestMessage" class="btn btn-secondary">
                        <i class="fas fa-paper-plane"></i> Send Test Message
                    </button>
                </div>
            </div>
        </div>
        {% endif %}
        
        <div class="section glass">
            <div class="section-header">
                <h2><i class="fas fa-link"></i> Connect Your Telegram Account</h2>
            </div>
            
            <div class="telegram-setup">
                <div class="telegram-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3><i class="fas fa-robot"></i> Start Our Bot</h3>
                        <p>Open Telegram and search for our bot: <strong>@SMMAutomationBot</strong></p>
                        <div class="telegram-image">
                            <img src="{{ url_for('static', filename='img/telegram-bot.png') }}" alt="Telegram Bot" class="telegram-preview" onerror="this.src='data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22100%22%20height%3D%22100%22%3E%3Crect%20fill%3D%22%23eee%22%20width%3D%22100%22%20height%3D%22100%22%2F%3E%3Cpath%20fill%3D%22%23888%22%20d%3D%22M38.5%2C50.5%20L62.5%2C38.5%20L62.5%2C62.5%20L38.5%2C50.5%20Z%22%2F%3E%3C%2Fsvg%3E'">
                        </div>
                        <div class="step-action">
                            <a href="https://t.me/SMMAutomationBot" target="_blank" class="btn btn-primary">
                                <i class="fab fa-telegram-plane"></i> Open Bot in Telegram
                            </a>
                        </div>
                    </div>
                </div>
                
                <div class="telegram-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3><i class="fas fa-comment-dots"></i> Send Command to Bot</h3>
                        <p>After starting the bot, send the command <code>/connect</code> to receive your personal Chat ID and verification code</p>
                        <div class="telegram-chat-preview">
                            <div class="telegram-chat-header">
                                <div class="telegram-chat-avatar">
                                    <i class="fab fa-telegram-plane"></i>
                                </div>
                                <div class="telegram-chat-name">SMM Automation Bot</div>
                            </div>
                            <div class="telegram-message-box">
                                <div class="telegram-user">You</div>
                                <div class="telegram-text">/connect</div>
                            </div>
                            <div class="telegram-message-box bot">
                                <div class="telegram-user">SMMAutomationBot</div>
                                <div class="telegram-text">Your Chat ID is: <span class="highlight">123456789</span></div>
                                <div class="telegram-text">Your verification code is: <span class="highlight">ABC123</span></div>
                                <div class="telegram-text">Please enter both this Chat ID and verification code on the SMM Automation website to complete the connection.</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="telegram-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3><i class="fas fa-plug"></i> Connect Your Account</h3>
                        <p>Enter your Telegram Chat ID and verification code below to start receiving notifications</p>
                        <form method="POST" action="{{ url_for('connect_telegram') }}" id="telegramForm">
                            <div class="form-group">
                                <label for="telegram_id"><i class="fas fa-hashtag"></i> Telegram Chat ID</label>
                                <div class="input-with-button">
                                    <input type="text" id="telegram_id" name="telegram_id" class="form-control" 
                                           value="{{ current_telegram_id }}" required 
                                           placeholder="e.g., 123456789" pattern="[0-9]+"
                                           title="Telegram ID should contain only numbers">
                                    {% if current_telegram_id %}
                                    <button type="button" id="copyCurrentId" class="btn btn-secondary btn-icon" 
                                            data-id="{{ current_telegram_id }}" title="Copy current ID">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                    {% endif %}
                                </div>
                                <small class="form-text">Telegram Chat ID usually consists of 9-10 digits</small>
                            </div>
                            
                            <div class="form-group">
                                <label for="verification_code"><i class="fas fa-key"></i> Verification Code</label>
                                <input type="text" id="verification_code" name="verification_code" class="form-control" 
                                       required placeholder="e.g., ABC123" 
                                       pattern="[A-Za-z0-9]+" 
                                       title="Verification code should contain only letters and numbers">
                                <small class="form-text">Enter the verification code you received from the bot</small>
                            </div>
                            
                            <div class="form-buttons">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-link"></i> 
                                    {% if current_telegram_id %}Update{% else %}Connect{% endif %} Telegram
                                </button>
                                <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">
                                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                                </a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="section faq-section glass">
            <div class="section-header">
                <h2><i class="fas fa-question-circle"></i> Frequently Asked Questions</h2>
            </div>
            
            <div class="faq-container">
                <div class="faq-item">
                    <div class="faq-question">
                        <h3>What notifications will I receive?</h3>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>You'll receive notifications about:</p>
                        <ul>
                            <li>Order confirmations and status updates</li>
                            <li>Automation job starts and completions</li>
                            <li>Important account updates</li>
                            <li>Balance alerts and system notifications</li>
                        </ul>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">
                        <h3>Is my Telegram ID secure?</h3>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Yes, your Telegram ID is stored securely on our servers and is only used to send you notifications. We don't share this information with third parties or use it for any other purpose.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">
                        <h3>What if I don't receive the verification code?</h3>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>If you don't receive the verification code, try the following steps:</p>
                        <ul>
                            <li>Make sure you've started the bot correctly</li>
                            <li>Try sending the /connect command again</li>
                            <li>Check if you have blocked the bot</li>
                            <li>If the problem persists, contact our support team</li>
                        </ul>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">
                        <h3>How do I disable notifications?</h3>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>You can disable notifications at any time by either:</p>
                        <ul>
                            <li>Removing your Telegram ID from this page</li>
                            <li>Blocking or stopping our bot in Telegram</li>
                            <li>Adjusting notification settings in your user profile</li>
                        </ul>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">
                        <h3>What if I can't find the bot?</h3>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>If you can't find the bot by searching, you can directly open it using the link provided above. Make sure you're using the correct bot name: <strong>@SMMAutomationBot</strong></p>
                        <p>If you're still having issues, please contact our support team for assistance.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Close flash messages
            document.querySelectorAll('.flash-close').forEach(button => {
                button.addEventListener('click', function() {
                    this.closest('.flash-message').style.opacity = '0';
                    setTimeout(() => {
                        this.closest('.flash-message').style.display = 'none';
                    }, 300);
                });
            });
            
            // Theme switching logic
            const themeToggle = document.getElementById('theme-toggle');
            const htmlElement = document.documentElement;
            
            themeToggle.addEventListener('change', function() {
                if (this.checked) {
                    htmlElement.setAttribute('data-theme', 'dark');
                    saveThemePreference('dark');
                } else {
                    htmlElement.setAttribute('data-theme', 'light');
                    saveThemePreference('light');
                }
            });
            
            function saveThemePreference(theme) {
                fetch('/toggle_theme', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ theme: theme }),
                }).catch(error => console.error('Error saving theme preference:', error));
            }
            
            // Copy Telegram ID to clipboard
            const copyButton = document.getElementById('copyCurrentId');
            if (copyButton) {
                copyButton.addEventListener('click', function() {
                    const telegramId = this.getAttribute('data-id');
                    navigator.clipboard.writeText(telegramId).then(() => {
                        // Show copied indicator
                        const originalIcon = this.innerHTML;
                        this.innerHTML = '<i class="fas fa-check"></i>';
                        setTimeout(() => {
                            this.innerHTML = originalIcon;
                        }, 1500);
                    }).catch(err => {
                        console.error('Could not copy text: ', err);
                    });
                });
            }
            
            // Send test message
            const testMessageButton = document.getElementById('sendTestMessage');
            if (testMessageButton) {
                testMessageButton.addEventListener('click', function() {
                    this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
                    this.disabled = true;
                    
                    // Make an API call to send a test message
                    fetch('/test_telegram_connection', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            telegram_id: document.getElementById('telegram_id').value
                        }),
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            this.innerHTML = '<i class="fas fa-check"></i> Message Sent!';
                        } else {
                            this.innerHTML = '<i class="fas fa-times"></i> Failed!';
                            alert('Failed to send test message: ' + data.error);
                        }
                        
                        setTimeout(() => {
                            this.innerHTML = '<i class="fas fa-paper-plane"></i> Send Test Message';
                            this.disabled = false;
                        }, 2000);
                    })
                    .catch(error => {
                        console.error('Error sending test message:', error);
                        this.innerHTML = '<i class="fas fa-times"></i> Failed!';
                        
                        setTimeout(() => {
                            this.innerHTML = '<i class="fas fa-paper-plane"></i> Send Test Message';
                            this.disabled = false;
                        }, 2000);
                    });
                });
            }
            
            // Form validation
            const telegramForm = document.getElementById('telegramForm');
            if (telegramForm) {
                telegramForm.addEventListener('submit', function(e) {
                    const telegramIdInput = document.getElementById('telegram_id');
                    const telegramId = telegramIdInput.value.trim();
                    
                    // Telegram ID validation - should be only digits
                    if (!/^\d+$/.test(telegramId)) {
                        e.preventDefault();
                        telegramIdInput.classList.add('is-invalid');
                        alert('Telegram Chat ID should contain only numbers. Please check the ID you received from the bot.');
                        return false;
                    }
                    
                    const verificationCodeInput = document.getElementById('verification_code');
                    const verificationCode = verificationCodeInput.value.trim();
                    
                    // Verification code validation - should be alphanumeric
                    if (!/^[A-Za-z0-9]+$/.test(verificationCode)) {
                        e.preventDefault();
                        verificationCodeInput.classList.add('is-invalid');
                        alert('Verification code should contain only letters and numbers. Please check the code you received from the bot.');
                        return false;
                    }
                    
                    return true;
                });
            }
            
            // FAQ accordion
            document.querySelectorAll('.faq-question').forEach(question => {
                question.addEventListener('click', function() {
                    const answer = this.nextElementSibling;
                    const icon = this.querySelector('i');
                    
                    if (answer.style.maxHeight) {
                        answer.style.maxHeight = null;
                        icon.classList.remove('fa-chevron-up');
                        icon.classList.add('fa-chevron-down');
                    } else {
                        answer.style.maxHeight = answer.scrollHeight + 'px';
                        icon.classList.remove('fa-chevron-down');
                        icon.classList.add('fa-chevron-up');
                    }
                });
            });
            
            // Add animation to steps
            const steps = document.querySelectorAll('.telegram-step');
            steps.forEach((step, index) => {
                setTimeout(() => {
                    step.classList.add('animate-in');
                }, index * 200);
            });
        });
    </script>
</body>
</html>